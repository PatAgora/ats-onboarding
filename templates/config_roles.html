{% extends "base.html" %}
{% block content %}

<div class="page-header">
  <div class="page-header-left">
    <h1>Role Types</h1>
    <p class="subtext">These drive the dropdown on engagement plans and the default day rate.</p>
  </div>
</div>

<form method="POST" class="card card-pad-lg" style="max-width:700px;">
  <table class="table role-table">
    <thead>
      <tr>
        <th style="width:50%">Role name</th>
        <th style="width:25%">Default Â£/day</th>
        <th style="width:15%">Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for r in roles %}
      <tr>
        <td>
          <input class="input" type="text" name="role_name[]" value="{{ r.name }}">
          <input type="hidden" name="role_id[]" value="{{ r.id }}">
        </td>
        <td>
          <input class="input" type="number" min="0" name="role_rate[]" value="{{ r.default_rate }}">
        </td>
        <td class="text-center">
          <input type="hidden" name="role_delete[]" value="0">
          <input type="checkbox"
                 onchange="this.previousElementSibling.value = this.checked ? '1':'0'">
        </td>
      </tr>
      {% endfor %}

      <!-- blank row to add new -->
      <tr>
        <td>
          <input class="input" type="text" name="role_name[]" placeholder="e.g. QA Analyst">
          <input type="hidden" name="role_id[]" value="">
        </td>
        <td>
          <input class="input" type="number" min="0" name="role_rate[]" placeholder="350">
        </td>
        <td class="text-center">
          <input type="hidden" name="role_delete[]" value="0">
          <!-- leave unchecked for new rows -->
          <input type="checkbox" disabled>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="mt-3 flex-row gap-md">
    <button class="btn btn-primary" type="submit">Save roles</button>
    <a class="btn btn-link" href="{{ url_for('index') }}">Cancel</a>
  </div>
</form>

{% endblock %}